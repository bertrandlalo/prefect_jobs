.. _hdf5:

=================
HDF5 organization
=================

As explained in the :ref:`rule_file_format` guideline , when creating new results, the
preferred file format to save them is HDF5.
The contents of these HDF5 files are organized by *keys*. Each key holds a
:py:class:`pandas.DataFrame`.

HDF5 keys should adhere to the following pattern (brackets denote optional
parts):

.. code-block::

   /source/type[/modality]/name

where:

* ``source`` is a short identifier of the original procedure or program that
  recorded or generated this dataset.

  This includes, for the moment:

  =============== ============================ =================================
  Name            Description                  Examples
  =============== ============================ =================================
  ``nexus``       Data generated by a program  All physiological signals of the
                  using a Nexus amplifier.     VR protocol.
  --------------- ---------------------------- ---------------------------------
  ``unity``       Data generated by a Unity    All application events on the
                  application.                 VR protocol.
  --------------- ---------------------------- ---------------------------------
  ``vive``        Data generated by an HTC     All VR headset and controller
                  Vive VR headset.             movements on the VR protocol.
  --------------- ---------------------------- ---------------------------------
  ``iguazu``      Data generated by Iguazu.    Clean signals, features, etc.
  =============== ============================ =================================

* ``type`` is a short name for the data type.

  This includes, for the moment:

  =============== ============================ =================================
  Name            Description                  Examples
  =============== ============================ =================================
  ``signal``      Signals as time series,      All physiological signals.
                  usually represented
                  as dataframes whose index
                  represents time.
  --------------- ---------------------------- ---------------------------------
  ``events``      Events, represented as       All application events.
                  dataframes that include the
                  type, time and associated
                  event data.
  --------------- ---------------------------- ---------------------------------
  ``features``    Features... we'll define     to be defined.
                  this later.
  =============== ============================ =================================

* ``modality`` is an *optional* name for the source of the data itself
  (note this is not the same as the ``source`` key, see the examples).

  This includes, for the moment:

  =============== ============================ =================================
  Name            Description                  Examples
  =============== ============================ =================================
  ``gsr``         Data related to the          Tonic conductance level, phasic
                  galvanic skin response.      conductance level, ...
  --------------- ---------------------------- ---------------------------------
  ``ppg``         Data related to the          Estimation of RR, HRV markers
                  photoplethysmogram.          like HF, LF, ...
  =============== ============================ =================================


* ``name`` is a short descriptive name of the data. It is up to the
  user/developer/analyst to choose one, but there are some names that we have
  already *reserved*:

  =============== ==============================================================
  Name            Description
  =============== ==============================================================
  ``raw``         The original recorded data without any modifications.
  --------------- --------------------------------------------------------------
  ``prepared``    Input data after a device-dependent code has standardized its
                  contents. This data is not entirely pre-processed yet.
  --------------- --------------------------------------------------------------
  ``clean``       Pre-processed data ready for feature extraction or further
                  analyses.
  =============== ==============================================================
